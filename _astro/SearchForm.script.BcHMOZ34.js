function Te(n){var e=document,t=n.container||e.createElement("div"),r=n.preventSubmit||0;t.id=t.id||"autocomplete-"+N();var s=t.style,i=n.debounceWaitMs||0,c=n.disableAutoSelect||!1,a=t.parentElement,o=[],l="",f=2,g=n.showOnFocus,p,v=0,E,y=!1,w=!1;if(n.minLength!==void 0&&(f=n.minLength),!n.input)throw new Error("input undefined");var u=n.input;t.className=[t.className,"autocomplete",n.className||""].join(" ").trim(),t.setAttribute("role","listbox"),u.setAttribute("role","combobox"),u.setAttribute("aria-expanded","false"),u.setAttribute("aria-autocomplete","list"),u.setAttribute("aria-controls",t.id),u.setAttribute("aria-owns",t.id),u.setAttribute("aria-activedescendant",""),u.setAttribute("aria-haspopup","listbox"),s.position="absolute";function N(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function C(){var h=t.parentNode;h&&h.removeChild(t)}function j(){E&&window.clearTimeout(E)}function J(){t.parentNode||(a||e.body).appendChild(t)}function P(){return!!t.parentNode}function x(){v++,o=[],l="",p=void 0,u.setAttribute("aria-activedescendant",""),u.setAttribute("aria-expanded","false"),C()}function R(){if(!P())return;u.setAttribute("aria-expanded","true"),s.height="auto",s.width=u.offsetWidth+"px";var h=0,m;function M(){var I=e.documentElement,S=I.clientTop||e.body.clientTop||0,_=I.clientLeft||e.body.clientLeft||0,B=window.pageYOffset||I.scrollTop,$=window.pageXOffset||I.scrollLeft;m=u.getBoundingClientRect();var A=m.top+u.offsetHeight+B-S,Y=m.left+$-_;s.top=A+"px",s.left=Y+"px",h=window.innerHeight-(m.top+u.offsetHeight),h<0&&(h=0),s.top=A+"px",s.bottom="",s.left=Y+"px",s.maxHeight=h+"px"}M(),M(),n.customize&&m&&n.customize(u,m,t,h)}function k(){t.textContent="",u.setAttribute("aria-activedescendant","");var h=function(_,B,$){var A=e.createElement("div");return A.textContent=_.label||"",A};n.render&&(h=n.render);var m=function(_,B){var $=e.createElement("div");return $.textContent=_,$};n.renderGroup&&(m=n.renderGroup);var M=e.createDocumentFragment(),I=N();if(o.forEach(function(_,B){if(_.group&&_.group!==I){I=_.group;var $=m(_.group,l);$&&($.className+=" group",M.appendChild($))}var A=h(_,l,B);A&&(A.id=t.id+"_"+B,A.setAttribute("role","option"),A.addEventListener("click",function(Y){w=!0;try{n.onSelect(_,u)}finally{w=!1}x(),Y.preventDefault(),Y.stopPropagation()}),_===p&&(A.className+=" selected",A.setAttribute("aria-selected","true"),u.setAttribute("aria-activedescendant",A.id)),M.appendChild(A))}),t.appendChild(M),o.length<1)if(n.emptyMsg){var S=e.createElement("div");S.id=t.id+"_"+N(),S.className="empty",S.textContent=n.emptyMsg,t.appendChild(S),u.setAttribute("aria-activedescendant",S.id)}else{x();return}J(),R(),b()}function G(){P()&&k()}function W(){G()}function T(h){h.target!==t?G():h.preventDefault()}function Z(){w||V(0)}function b(){var h=t.getElementsByClassName("selected");if(h.length>0){var m=h[0],M=m.previousElementSibling;if(M&&M.className.indexOf("group")!==-1&&!M.previousElementSibling&&(m=M),m.offsetTop<t.scrollTop)t.scrollTop=m.offsetTop;else{var I=m.offsetTop+m.offsetHeight,S=t.scrollTop+t.offsetHeight;I>S&&(t.scrollTop+=I-S)}}}function z(){var h=o.indexOf(p);p=h===-1?void 0:o[(h+o.length-1)%o.length],oe(h)}function U(){var h=o.indexOf(p);p=o.length<1?void 0:h===-1?o[0]:o[(h+1)%o.length],oe(h)}function oe(h){o.length>0&&(ke(h),Ie(o.indexOf(p)),b())}function Ie(h){var m=e.getElementById(t.id+"_"+h);m&&(m.classList.add("selected"),m.setAttribute("aria-selected","true"),u.setAttribute("aria-activedescendant",m.id))}function ke(h){var m=e.getElementById(t.id+"_"+h);m&&(m.classList.remove("selected"),m.removeAttribute("aria-selected"),u.removeAttribute("aria-activedescendant"))}function Ne(h,m){var M=P();if(m==="Escape")x();else{if(!M||o.length<1)return;m==="ArrowUp"?z():U()}h.preventDefault(),M&&h.stopPropagation()}function Ce(h){if(p){r===2&&h.preventDefault(),w=!0;try{n.onSelect(p,u)}finally{w=!1}x()}r===1&&h.preventDefault()}function ae(h){var m=h.key;switch(m){case"ArrowUp":case"ArrowDown":case"Escape":Ne(h,m);break;case"Enter":Ce(h);break}}function le(){g&&V(1)}function V(h){u.value.length>=f||h===1?(j(),E=window.setTimeout(function(){return ue(u.value,h,u.selectionStart||0)},h===0||h===2?i:0)):x()}function ue(h,m,M){if(!y){var I=++v;n.fetch(h,function(S){v===I&&S&&(o=S,l=h,p=o.length<1||c?void 0:o[0],k())},m,M)}}function he(h){if(n.keyup){n.keyup({event:h,fetch:function(){return V(0)}});return}!P()&&h.key==="ArrowDown"&&V(0)}function fe(h){n.click&&n.click({event:h,fetch:function(){return V(2)}})}function de(){setTimeout(function(){e.activeElement!==u&&x()},200)}function Re(){ue(u.value,3,u.selectionStart||0)}t.addEventListener("mousedown",function(h){h.stopPropagation(),h.preventDefault()}),t.addEventListener("focus",function(){return u.focus()}),C();function Oe(){u.removeEventListener("focus",le),u.removeEventListener("keyup",he),u.removeEventListener("click",fe),u.removeEventListener("keydown",ae),u.removeEventListener("input",Z),u.removeEventListener("blur",de),window.removeEventListener("resize",W),e.removeEventListener("scroll",T,!0),u.removeAttribute("role"),u.removeAttribute("aria-expanded"),u.removeAttribute("aria-autocomplete"),u.removeAttribute("aria-controls"),u.removeAttribute("aria-activedescendant"),u.removeAttribute("aria-owns"),u.removeAttribute("aria-haspopup"),j(),x(),y=!0}return u.addEventListener("keyup",he),u.addEventListener("click",fe),u.addEventListener("keydown",ae),u.addEventListener("input",Z),u.addEventListener("blur",de),u.addEventListener("focus",le),window.addEventListener("resize",W),e.addEventListener("scroll",T,!0),{destroy:Oe,fetch:Re}}function F(n){return Array.isArray?Array.isArray(n):ye(n)==="[object Array]"}const $e=1/0;function Fe(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-$e?"-0":e}function Pe(n){return n==null?"":Fe(n)}function O(n){return typeof n=="string"}function xe(n){return typeof n=="number"}function De(n){return n===!0||n===!1||je(n)&&ye(n)=="[object Boolean]"}function Me(n){return typeof n=="object"}function je(n){return Me(n)&&n!==null}function L(n){return n!=null}function q(n){return!n.trim().length}function ye(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const He="Incorrect 'index' type",Ke=n=>`Invalid value for key ${n}`,We=n=>`Pattern length exceeds max of ${n}.`,ze=n=>`Missing ${n} property in key`,Be=n=>`Property 'weight' in key '${n}' must be a positive integer`,pe=Object.prototype.hasOwnProperty;class Ge{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let s=be(r);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function be(n){let e=null,t=null,r=null,s=1,i=null;if(O(n)||F(n))r=n,e=ge(n),t=ee(n);else{if(!pe.call(n,"name"))throw new Error(ze("name"));const c=n.name;if(r=c,pe.call(n,"weight")&&(s=n.weight,s<=0))throw new Error(Be(c));e=ge(c),t=ee(c),i=n.getFn}return{path:e,id:t,weight:s,src:r,getFn:i}}function ge(n){return F(n)?n:n.split(".")}function ee(n){return F(n)?n.join("."):n}function Ve(n,e){let t=[],r=!1;const s=(i,c,a)=>{if(L(i))if(!c[a])t.push(i);else{let o=c[a];const l=i[o];if(!L(l))return;if(a===c.length-1&&(O(l)||xe(l)||De(l)))t.push(Pe(l));else if(F(l)){r=!0;for(let f=0,g=l.length;f<g;f+=1)s(l[f],c,a+1)}else c.length&&s(l,c,a+1)}};return s(n,O(e)?e.split("."):e,0),r?t:t[0]}const Ye={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ue={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},Xe={location:0,threshold:.6,distance:100},Qe={useExtendedSearch:!1,getFn:Ve,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var d={...Ue,...Ye,...Xe,...Qe};const Je=/[^ ]+/g;function Ze(n=1,e=3){const t=new Map,r=Math.pow(10,e);return{get(s){const i=s.match(Je).length;if(t.has(i))return t.get(i);const c=1/Math.pow(i,.5*n),a=parseFloat(Math.round(c*r)/r);return t.set(i,a),a},clear(){t.clear()}}}class ce{constructor({getFn:e=d.getFn,fieldNormWeight:t=d.fieldNormWeight}={}){this.norm=Ze(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,O(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();O(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!L(e)||q(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((s,i)=>{let c=s.getFn?s.getFn(e):this.getFn(e,s.path);if(L(c)){if(F(c)){let a=[];const o=[{nestedArrIndex:-1,value:c}];for(;o.length;){const{nestedArrIndex:l,value:f}=o.pop();if(L(f))if(O(f)&&!q(f)){let g={v:f,i:l,n:this.norm.get(f)};a.push(g)}else F(f)&&f.forEach((g,p)=>{o.push({nestedArrIndex:p,value:g})})}r.$[i]=a}else if(O(c)&&!q(c)){let a={v:c,n:this.norm.get(c)};r.$[i]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Ae(n,e,{getFn:t=d.getFn,fieldNormWeight:r=d.fieldNormWeight}={}){const s=new ce({getFn:t,fieldNormWeight:r});return s.setKeys(n.map(be)),s.setSources(e),s.create(),s}function qe(n,{getFn:e=d.getFn,fieldNormWeight:t=d.fieldNormWeight}={}){const{keys:r,records:s}=n,i=new ce({getFn:e,fieldNormWeight:t});return i.setKeys(r),i.setIndexRecords(s),i}function X(n,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:s=d.distance,ignoreLocation:i=d.ignoreLocation}={}){const c=e/n.length;if(i)return c;const a=Math.abs(r-t);return s?c+a/s:a?1:c}function et(n=[],e=d.minMatchCharLength){let t=[],r=-1,s=-1,i=0;for(let c=n.length;i<c;i+=1){let a=n[i];a&&r===-1?r=i:!a&&r!==-1&&(s=i-1,s-r+1>=e&&t.push([r,s]),r=-1)}return n[i-1]&&i-r>=e&&t.push([r,i-1]),t}const H=32;function tt(n,e,t,{location:r=d.location,distance:s=d.distance,threshold:i=d.threshold,findAllMatches:c=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,includeMatches:o=d.includeMatches,ignoreLocation:l=d.ignoreLocation}={}){if(e.length>H)throw new Error(We(H));const f=e.length,g=n.length,p=Math.max(0,Math.min(r,g));let v=i,E=p;const y=a>1||o,w=y?Array(g):[];let u;for(;(u=n.indexOf(e,E))>-1;){let x=X(e,{currentLocation:u,expectedLocation:p,distance:s,ignoreLocation:l});if(v=Math.min(x,v),E=u+f,y){let R=0;for(;R<f;)w[u+R]=1,R+=1}}E=-1;let N=[],C=1,j=f+g;const J=1<<f-1;for(let x=0;x<f;x+=1){let R=0,k=j;for(;R<k;)X(e,{errors:x,currentLocation:p+k,expectedLocation:p,distance:s,ignoreLocation:l})<=v?R=k:j=k,k=Math.floor((j-R)/2+R);j=k;let G=Math.max(1,p-k+1),W=c?g:Math.min(p+k,g)+f,T=Array(W+2);T[W+1]=(1<<x)-1;for(let b=W;b>=G;b-=1){let z=b-1,U=t[n.charAt(z)];if(y&&(w[z]=+!!U),T[b]=(T[b+1]<<1|1)&U,x&&(T[b]|=(N[b+1]|N[b])<<1|1|N[b+1]),T[b]&J&&(C=X(e,{errors:x,currentLocation:z,expectedLocation:p,distance:s,ignoreLocation:l}),C<=v)){if(v=C,E=z,E<=p)break;G=Math.max(1,2*p-E)}}if(X(e,{errors:x+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:l})>v)break;N=T}const P={isMatch:E>=0,score:Math.max(.001,C)};if(y){const x=et(w,a);x.length?o&&(P.indices=x):P.isMatch=!1}return P}function nt(n){let e={};for(let t=0,r=n.length;t<r;t+=1){const s=n.charAt(t);e[s]=(e[s]||0)|1<<r-t-1}return e}class we{constructor(e,{location:t=d.location,threshold:r=d.threshold,distance:s=d.distance,includeMatches:i=d.includeMatches,findAllMatches:c=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,isCaseSensitive:o=d.isCaseSensitive,ignoreLocation:l=d.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:s,includeMatches:i,findAllMatches:c,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:l},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(p,v)=>{this.chunks.push({pattern:p,alphabet:nt(p),startIndex:v})},g=this.pattern.length;if(g>H){let p=0;const v=g%H,E=g-v;for(;p<E;)f(this.pattern.substr(p,H),p),p+=H;if(v){const y=g-H;f(this.pattern.substr(y),y)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let E={isMatch:!0,score:0};return r&&(E.indices=[[0,e.length-1]]),E}const{location:s,distance:i,threshold:c,findAllMatches:a,minMatchCharLength:o,ignoreLocation:l}=this.options;let f=[],g=0,p=!1;this.chunks.forEach(({pattern:E,alphabet:y,startIndex:w})=>{const{isMatch:u,score:N,indices:C}=tt(e,E,y,{location:s+w,distance:i,threshold:c,findAllMatches:a,minMatchCharLength:o,includeMatches:r,ignoreLocation:l});u&&(p=!0),g+=N,u&&C&&(f=[...f,...C])});let v={isMatch:p,score:p?g/this.chunks.length:1};return p&&r&&(v.indices=f),v}}class D{constructor(e){this.pattern=e}static isMultiMatch(e){return me(e,this.multiRegex)}static isSingleMatch(e){return me(e,this.singleRegex)}search(){}}function me(n,e){const t=n.match(e);return t?t[1]:null}class rt extends D{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class st extends D{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class it extends D{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ct extends D{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class ot extends D{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class at extends D{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Se extends D{constructor(e,{location:t=d.location,threshold:r=d.threshold,distance:s=d.distance,includeMatches:i=d.includeMatches,findAllMatches:c=d.findAllMatches,minMatchCharLength:a=d.minMatchCharLength,isCaseSensitive:o=d.isCaseSensitive,ignoreLocation:l=d.ignoreLocation}={}){super(e),this._bitapSearch=new we(e,{location:t,threshold:r,distance:s,includeMatches:i,findAllMatches:c,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class _e extends D{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r;const s=[],i=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+i,s.push([r,t-1]);const c=!!s.length;return{isMatch:c,score:c?0:1,indices:s}}}const te=[rt,_e,it,ct,at,ot,st,Se],ve=te.length,lt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ut="|";function ht(n,e={}){return n.split(ut).map(t=>{let r=t.trim().split(lt).filter(i=>i&&!!i.trim()),s=[];for(let i=0,c=r.length;i<c;i+=1){const a=r[i];let o=!1,l=-1;for(;!o&&++l<ve;){const f=te[l];let g=f.isMultiMatch(a);g&&(s.push(new f(g,e)),o=!0)}if(!o)for(l=-1;++l<ve;){const f=te[l];let g=f.isSingleMatch(a);if(g){s.push(new f(g,e));break}}}return s})}const ft=new Set([Se.type,_e.type]);class dt{constructor(e,{isCaseSensitive:t=d.isCaseSensitive,includeMatches:r=d.includeMatches,minMatchCharLength:s=d.minMatchCharLength,ignoreLocation:i=d.ignoreLocation,findAllMatches:c=d.findAllMatches,location:a=d.location,threshold:o=d.threshold,distance:l=d.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:s,findAllMatches:c,ignoreLocation:i,location:a,threshold:o,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=ht(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let i=0,c=[],a=0;for(let o=0,l=t.length;o<l;o+=1){const f=t[o];c.length=0,i=0;for(let g=0,p=f.length;g<p;g+=1){const v=f[g],{isMatch:E,indices:y,score:w}=v.search(e);if(E){if(i+=1,a+=w,r){const u=v.constructor.type;ft.has(u)?c=[...c,...y]:c.push(y)}}else{a=0,i=0,c.length=0;break}}if(i){let g={isMatch:!0,score:a/i};return r&&(g.indices=c),g}}return{isMatch:!1,score:1}}}const ne=[];function pt(...n){ne.push(...n)}function re(n,e){for(let t=0,r=ne.length;t<r;t+=1){let s=ne[t];if(s.condition(n,e))return new s(n,e)}return new we(n,e)}const Q={AND:"$and",OR:"$or"},se={PATH:"$path",PATTERN:"$val"},ie=n=>!!(n[Q.AND]||n[Q.OR]),gt=n=>!!n[se.PATH],mt=n=>!F(n)&&Me(n)&&!ie(n),Ee=n=>({[Q.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function Le(n,e,{auto:t=!0}={}){const r=s=>{let i=Object.keys(s);const c=gt(s);if(!c&&i.length>1&&!ie(s))return r(Ee(s));if(mt(s)){const o=c?s[se.PATH]:i[0],l=c?s[se.PATTERN]:s[o];if(!O(l))throw new Error(Ke(o));const f={keyId:ee(o),pattern:l};return t&&(f.searcher=re(l,e)),f}let a={children:[],operator:i[0]};return i.forEach(o=>{const l=s[o];F(l)&&l.forEach(f=>{a.children.push(r(f))})}),a};return ie(n)||(n=Ee(n)),r(n)}function vt(n,{ignoreFieldNorm:e=d.ignoreFieldNorm}){n.forEach(t=>{let r=1;t.matches.forEach(({key:s,norm:i,score:c})=>{const a=s?s.weight:null;r*=Math.pow(c===0&&a?Number.EPSILON:c,(a||1)*(e?1:i))}),t.score=r})}function Et(n,e){const t=n.matches;e.matches=[],L(t)&&t.forEach(r=>{if(!L(r.indices)||!r.indices.length)return;const{indices:s,value:i}=r;let c={indices:s,value:i};r.key&&(c.key=r.key.src),r.idx>-1&&(c.refIndex=r.idx),e.matches.push(c)})}function xt(n,e){e.score=n.score}function Mt(n,e,{includeMatches:t=d.includeMatches,includeScore:r=d.includeScore}={}){const s=[];return t&&s.push(Et),r&&s.push(xt),n.map(i=>{const{idx:c}=i,a={item:e[c],refIndex:c};return s.length&&s.forEach(o=>{o(i,a)}),a})}class K{constructor(e,t={},r){this.options={...d,...t},this.options.useExtendedSearch,this._keyStore=new Ge(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ce))throw new Error(He);this._myIndex=t||Ae(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){L(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let r=0,s=this._docs.length;r<s;r+=1){const i=this._docs[r];e(i,r)&&(this.removeAt(r),r-=1,s-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:i,sortFn:c,ignoreFieldNorm:a}=this.options;let o=O(e)?O(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return vt(o,{ignoreFieldNorm:a}),i&&o.sort(c),xe(t)&&t>-1&&(o=o.slice(0,t)),Mt(o,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){const t=re(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:i,i:c,n:a})=>{if(!L(i))return;const{isMatch:o,score:l,indices:f}=t.searchIn(i);o&&s.push({item:i,idx:c,matches:[{score:l,value:i,norm:a,indices:f}]})}),s}_searchLogical(e){const t=Le(e,this.options),r=(a,o,l)=>{if(!a.children){const{keyId:g,searcher:p}=a,v=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(o,g),searcher:p});return v&&v.length?[{idx:l,item:o,matches:v}]:[]}const f=[];for(let g=0,p=a.children.length;g<p;g+=1){const v=a.children[g],E=r(v,o,l);if(E.length)f.push(...E);else if(a.operator===Q.AND)return[]}return f},s=this._myIndex.records,i={},c=[];return s.forEach(({$:a,i:o})=>{if(L(a)){let l=r(t,a,o);l.length&&(i[o]||(i[o]={idx:o,item:a,matches:[]},c.push(i[o])),l.forEach(({matches:f})=>{i[o].matches.push(...f)}))}}),c}_searchObjectList(e){const t=re(e,this.options),{keys:r,records:s}=this._myIndex,i=[];return s.forEach(({$:c,i:a})=>{if(!L(c))return;let o=[];r.forEach((l,f)=>{o.push(...this._findMatches({key:l,value:c[f],searcher:t}))}),o.length&&i.push({idx:a,item:c,matches:o})}),i}_findMatches({key:e,value:t,searcher:r}){if(!L(t))return[];let s=[];if(F(t))t.forEach(({v:i,i:c,n:a})=>{if(!L(i))return;const{isMatch:o,score:l,indices:f}=r.searchIn(i);o&&s.push({score:l,key:e,value:i,idx:c,norm:a,indices:f})});else{const{v:i,n:c}=t,{isMatch:a,score:o,indices:l}=r.searchIn(i);a&&s.push({score:o,key:e,value:i,norm:c,indices:l})}return s}}K.version="6.6.2";K.createIndex=Ae;K.parseIndex=qe;K.config=d;K.parseQuery=Le;pt(dt);async function yt(){const n=await fetch("/searchindex.json");if(n.status>400)throw new Error("Failed to fetch searchindex.json");return n.json()}function bt(n){const e=K.parseIndex(n.index);return new K(n.rows,{},e)}async function At(n){let e;Te({input:n,fetch:async(t,r)=>{e??=bt(await yt());const s=e.search(t,{limit:10});r(s.map(i=>({label:i.item.title,value:i.item.slug})))},onSelect:t=>{const r=t.value;window.location.href=`/${r}`}})}export{At as setup};
